(function(g){var window=this;'use strict';var kd=function(m){m.publish("autonavvisibility")},WNC=function(m,F){g.sP(m,"onAutonavCoundownStarted",F)},hN=function(m){return m.isBackground()&&m.tN()},OkC=function(m,F){F=F.getWatchNextResponse()?.playerOverlays?.playerOverlayRenderer?.autoplay?.playerOverlayAutoplayRenderer?.nextButton?.buttonRenderer;
m.T=F?.navigationEndpoint;F=F?.trackingParams;m.playButton&&F&&m.Y.setTrackingParams(m.playButton.element,F)},QF=function(m){const F=W6(m);
var L=Math,u=L.min;var q=m.L?Date.now()-m.L:0;L=u.call(L,q,F);Oq(m,Math.ceil((F-L)/1E3));F-L<=500&&m.X()?m.select(!0):m.X()&&m.W.start()},sq=function(m){var F=m.Y.BM(!0,m.Y.isFullscreen());
g.E(m.container.element,"ytp-autonav-endscreen-small-mode",m.JD(F));g.E(m.container.element,"ytp-autonav-endscreen-is-premium",!!m.suggestion&&!!m.suggestion.zJ);g.E(m.Y.getRootNode(),"ytp-autonav-endscreen-cancelled-state",!m.Y.B2());g.E(m.Y.getRootNode(),"countdown-running",m.X());g.E(m.container.element,"ytp-player-content",m.Y.B2());g.nk(m.overlay.element,{width:`${F.width}px`});if(!m.X()){m.Y.B2()?Oq(m,Math.round(W6(m)/1E3)):Oq(m);F=!!m.suggestion&&!!m.suggestion.u0;const L=m.Y.B2()||!F;g.E(m.container.element,
"ytp-autonav-endscreen-upnext-alternative-header-only",!L&&F);g.E(m.container.element,"ytp-autonav-endscreen-upnext-no-alternative-header",L&&!F);m.j.CI(m.Y.B2());g.E(m.element,"ytp-enable-w2w-color-transitions",!!m.Y.getVideoData()?.watchToWatchTransitionRenderer)}},Oq=function(m,F=-1){m=m.V.Vc("ytp-autonav-endscreen-upnext-header");
g.DU(m);if(F>=0){F=String(F);const L="Up next in $SECONDS".match(RegExp("\\$SECONDS","gi"))[0],u="Up next in $SECONDS".indexOf(L);if(u>=0){m.appendChild(g.Yj("Up next in $SECONDS".slice(0,u)));const q=g.z0("span");g.Cd(q,"ytp-autonav-endscreen-upnext-header-countdown-number");g.Kk(q,F);m.appendChild(q);m.appendChild(g.Yj("Up next in $SECONDS".slice(u+L.length)));return}}g.Kk(m,"Up next")},W6=function(m){return m.Y.isFullscreen()?(m=m.Y.getVideoData()?.WL,m===-1||m===void 0?8E3:m):m.Y.Yz()>=0?m.Y.Yz():
g.Ek(m.Y.K().experiments,"autoplay_time")||1E4},bj=function(m,F){F=Q2f(m,F);
var L=Math,u=L.min;var q=(0,g.W)()-m.L;L=u.call(L,q,F);F=F===0?1:Math.min(L/F,1);m.M0.setAttribute("stroke-dashoffset",`${-211*(F+1)}`);F>=1&&m.X()&&m.api.getPresentingPlayerType()!==3?m.select(!0):m.X()&&m.V.start()},Q2f=function(m,F){return F?F:m.api.isFullscreen()?(m=m.api.getVideoData()?.WL,m===-1||m===void 0?8E3:m):m.api.Yz()>=0?m.api.Yz():g.Ek(m.api.K().experiments,"autoplay_time")||1E4},c6=function(m){const F=m.B2();
F!==m.L&&(m.L=F,kd(m.player),m.L?(m.B!==m.X&&m.B.hide(),m.table.hide()):(m.B!==m.X&&m.B.show(),m.table.show()))},d7=function(m){return g.Ip(m.player)&&m.V()&&!m.O},nh=function(m){const F=m.B2();
F!==m.W&&(m.W=F,kd(m.player))},B6=function(m){return g.Ip(m.player)&&m.V()&&!m.j},H6=function(m){const F=m.B2();
F!==m.hF&&(m.hF=F,kd(m.player))},s2R=function(m){m=m.K();
return m.tW&&!m.v2&&!m.disableOrganicUi},bkf=function(m){const F=m.player.getVideoData();
if(!F||m.X===F.v2&&m.B===F.SY)return!1;m.X=F.v2;m.B=F.SY;return!0},cQZ=function(m){m.player.Ow("endscreen");
var F=m.player.getVideoData();F=new g.Du(Math.max((F.lengthSeconds-10)*1E3,0),0x8000000000000,{id:"preload",namespace:"endscreen"});const L=new g.Du(0x8000000000000,0x8000000000000,{id:"load",priority:8,namespace:"endscreen"});m.player.dF([F,L])};
g.H8.prototype.Yz=g.fM(9,function(){return this.app.Yz()});
g.ti.prototype.Yz=g.fM(8,function(){return this.getVideoData().q$});
g.B8.prototype.xl=g.fM(7,function(m){this.Om().xl(m)});
g.Vq.prototype.xl=g.fM(6,function(m){this.d4!==m&&(this.d4=m,this.PF())});
var dLf=class extends g.H{constructor(m){const F=m.K(),L=F.V;super({U:"a",J:"ytp-autonav-suggestion-card",C:{href:"{{url}}",target:L?F.W:"","aria-label":"{{aria_label}}","data-is-live":"{{is_live}}","data-is-list":"{{is_list}}","data-is-mix":"{{is_mix}}","data-is-upcoming":"{{is_upcoming}}"},D:[{U:"div",UR:["ytp-autonav-endscreen-upnext-thumbnail","ytp-autonav-thumbnail-small"],C:{style:"{{background}}"},D:[{U:"div",C:{"aria-label":"{{timestamp}}"},UR:["ytp-autonav-timestamp"],G0:"{{duration}}"},
{U:"div",UR:["ytp-autonav-live-stamp"],G0:"Live"},{U:"div",UR:["ytp-autonav-upcoming-stamp"],G0:"Upcoming"},{U:"div",J:"ytp-autonav-list-overlay",D:[{U:"div",J:"ytp-autonav-mix-text",G0:"Mix"},{U:"div",J:"ytp-autonav-mix-icon"}]}]},{U:"div",UR:["ytp-autonav-endscreen-upnext-title","ytp-autonav-title-card"],G0:"{{title}}"},{U:"div",UR:["ytp-autonav-endscreen-upnext-author","ytp-autonav-author-card"],G0:"{{author}}"},{U:"div",UR:["ytp-autonav-endscreen-upnext-author","ytp-autonav-view-and-date-card"],
G0:"{{views_and_publish_time}}"}]});this.Y=m;this.suggestion=null;this.X=L;this.listen("click",this.onClick);this.listen("keypress",this.onKeyPress)}select(){this.Y.JO(this.suggestion.videoId,this.suggestion.sessionData,this.suggestion.playlistId,void 0,void 0,this.suggestion.Fq||void 0)&&this.Y.logClick(this.element)}onClick(m){g.KI(m,this.Y,this.X,this.suggestion.sessionData||void 0)&&this.select()}onKeyPress(m){switch(m.keyCode){case 13:case 32:m.defaultPrevented||(this.select(),m.preventDefault())}}};var JN=class extends g.H{constructor(m,F=!1){super({U:"div",J:"ytp-autonav-endscreen-countdown-overlay"});this.OR=F;this.cancelCommand=this.T=void 0;this.L=0;this.container=new g.H({U:"div",J:"ytp-autonav-endscreen-countdown-container"});g.Z(this,this.container);this.container.ER(this.element);F=m.K();const L=F.V;this.Y=m;this.suggestion=null;this.onVideoDataChange("newdata",this.Y.getVideoData());this.A(m,"videodatachange",this.onVideoDataChange);this.V=new g.H({U:"div",J:"ytp-autonav-endscreen-upnext-container",
C:{"aria-label":"{{aria_label}}","data-is-live":"{{is_live}}","data-is-list":"{{is_list}}","data-is-mix":"{{is_mix}}","data-is-upcoming":"{{is_upcoming}}"},D:[{U:"div",J:"ytp-autonav-endscreen-upnext-header"},{U:"div",J:"ytp-autonav-endscreen-upnext-alternative-header",G0:"{{autoplayAlternativeHeader}}"},{U:"a",J:"ytp-autonav-endscreen-link-container",C:{href:"{{url}}",target:L?F.W:""},D:[{U:"div",J:"ytp-autonav-endscreen-upnext-thumbnail",C:{style:"{{background}}"},D:[{U:"div",C:{"aria-label":"{{timestamp}}"},
UR:["ytp-autonav-timestamp"],G0:"{{duration}}"},{U:"div",UR:["ytp-autonav-live-stamp"],G0:"Live"},{U:"div",UR:["ytp-autonav-upcoming-stamp"],G0:"Upcoming"}]},{U:"div",J:"ytp-autonav-endscreen-video-info",D:[{U:"div",J:"ytp-autonav-endscreen-premium-badge"},{U:"div",J:"ytp-autonav-endscreen-upnext-title",G0:"{{title}}"},{U:"div",J:"ytp-autonav-endscreen-upnext-author",G0:"{{author}}"},{U:"div",J:"ytp-autonav-view-and-date",G0:"{{views_and_publish_time}}"},{U:"div",J:"ytp-autonav-author-and-view",G0:"{{author_and_views}}"}]}]}]});
g.Z(this,this.V);this.V.ER(this.container.element);L||this.A(this.V.Vc("ytp-autonav-endscreen-link-container"),"click",this.b9);this.Y.createClientVe(this.container.element,this,115127);this.Y.createClientVe(this.V.Vc("ytp-autonav-endscreen-link-container"),this,115128);this.overlay=new g.H({U:"div",J:"ytp-autonav-overlay"});g.Z(this,this.overlay);this.overlay.ER(this.container.element);this.j=new g.H({U:"div",J:"ytp-autonav-endscreen-button-container"});g.Z(this,this.j);this.j.ER(this.container.element);
this.cancelButton=new g.H({U:"button",UR:["ytp-autonav-endscreen-upnext-button","ytp-autonav-endscreen-upnext-cancel-button","ytp-autonav-endscreen-upnext-button-rounded"],C:{"aria-label":"Cancel auto-play"},G0:"Cancel"});g.Z(this,this.cancelButton);this.cancelButton.ER(this.j.element);this.cancelButton.listen("click",this.M0,this);this.Y.createClientVe(this.cancelButton.element,this,115129);this.playButton=new g.H({U:"a",UR:["ytp-autonav-endscreen-upnext-button","ytp-autonav-endscreen-upnext-play-button",
"ytp-autonav-endscreen-upnext-button-rounded"],C:{href:"{{url}}",role:"button","aria-label":"Play next video"},G0:"Play now"});g.Z(this,this.playButton);this.playButton.ER(this.j.element);this.playButton.listen("click",this.b9,this);this.Y.createServerVe(this.playButton.element,this.playButton,!0);(F=this.Y.getVideoData())&&OkC(this,F);this.W=new g.d1(()=>{QF(this)},500);
g.Z(this,this.W);this.hF();this.A(m,"autonavvisibility",this.hF);this.Y.N("web_autonav_color_transition")&&(this.A(m,"autonavchange",this.Hb),this.A(m,"onAutonavCoundownStarted",this.tF))}Z(m){this.suggestion!==m&&(this.suggestion=m,g.Ar(this.V,m),this.playButton.updateValue("url",this.suggestion.Y1()),sq(this))}X(){return this.L>0}O(){this.X()||(this.L=Date.now(),QF(this),WNC(this.Y,W6(this)),g.E(this.Y.getRootNode(),"countdown-running",this.X()))}G(){this.B();QF(this);const m=this.V.Vc("ytp-autonav-endscreen-upnext-header");
m&&g.Kk(m,"Up next")}B(){this.X()&&(this.W.stop(),this.L=0)}select(m=!1){this.Y.nextVideo(!1,m);this.B()}b9(m){g.KI(m,this.Y)&&(m.currentTarget===this.playButton.element?this.Y.logClick(this.playButton.element):m.currentTarget===this.V.Vc("ytp-autonav-endscreen-link-container")&&(m=this.V.Vc("ytp-autonav-endscreen-link-container"),this.Y.logVisibility(m,!0),this.Y.logClick(m)),this.T?(g.sP(this.Y,"innertubeCommand",this.T),this.B()):this.select())}M0(){this.Y.logClick(this.cancelButton.element);g.ra(this.Y,
!0);this.cancelCommand&&g.sP(this.Y,"innertubeCommand",this.cancelCommand)}onVideoDataChange(m,F){OkC(this,F);this.cancelCommand=F.getWatchNextResponse()?.playerOverlays?.playerOverlayRenderer?.autoplay?.playerOverlayAutoplayRenderer?.cancelButton?.buttonRenderer?.command}tF(m){if(this.Y.getVideoData()?.watchToWatchTransitionRenderer){var F=this.Y.getVideoData().watchToWatchTransitionRenderer;const L=F?.fromColorPaletteDark,u=F?.toColorPaletteDark;L&&u&&(F=this.element,F.style.setProperty("--w2w-start-background-color",
g.sy(L.surgeColor)),F.style.setProperty("--w2w-start-primary-text-color",g.sy(L.primaryTitleColor)),F.style.setProperty("--w2w-start-secondary-text-color",g.sy(L.secondaryTitleColor)),F.style.setProperty("--w2w-end-background-color",g.sy(u.surgeColor)),F.style.setProperty("--w2w-end-primary-text-color",g.sy(u.primaryTitleColor)),F.style.setProperty("--w2w-end-secondary-text-color",g.sy(u.secondaryTitleColor)),F.style.setProperty("--w2w-animation-duration",`${m}ms`));g.E(this.element,"ytp-w2w-animate",
!0)}}Hb(m){this.Y.N("web_autonav_color_transition")&&m!==2&&g.E(this.element,"ytp-w2w-animate",!1)}hF(){const m=this.Y.B2();this.OR&&this.Gh!==m&&this.CI(m);sq(this);this.Y.logVisibility(this.container.element,m);this.Y.logVisibility(this.cancelButton.element,m);this.Y.logVisibility(this.V.Vc("ytp-autonav-endscreen-link-container"),m);this.Y.logVisibility(this.playButton.element,m)}JD(m){return m.width<400||m.height<459}};var Ch=class extends g.H{constructor(m,F){super({U:"div",UR:["html5-endscreen","ytp-player-content",F||"base-endscreen"]});this.created=!1;this.player=m}create(){this.created=!0}destroy(){this.created=!1}V(){return!1}B2(){return!1}T(){return!1}};var mt=class extends g.H{constructor(m){super({U:"div",UR:["ytp-upnext","ytp-player-content"],C:{"aria-label":"{{aria_label}}"},D:[{U:"div",J:"ytp-cued-thumbnail-overlay-image",C:{style:"{{background}}"}},{U:"span",J:"ytp-upnext-top",D:[{U:"span",J:"ytp-upnext-header",G0:"Up Next"},{U:"span",J:"ytp-upnext-title",G0:"{{title}}"},{U:"span",J:"ytp-upnext-author",G0:"{{author}}"}]},{U:"a",J:"ytp-upnext-autoplay-icon",C:{role:"button",href:"{{url}}","aria-label":"Play next video"},D:[{U:"svg",C:{height:"100%",
version:"1.1",viewBox:"0 0 72 72",width:"100%"},D:[{U:"circle",J:"ytp-svg-autoplay-circle",C:{cx:"36",cy:"36",fill:"#fff","fill-opacity":"0.3",r:"31.5"}},{U:"circle",J:"ytp-svg-autoplay-ring",C:{cx:"-36",cy:"36","fill-opacity":"0",r:"33.5",stroke:"#FFFFFF","stroke-dasharray":"211","stroke-dashoffset":"-211","stroke-width":"4",transform:"rotate(-90)"}},{U:"path",J:"ytp-svg-fill",C:{d:"M 24,48 41,36 24,24 V 48 z M 44,24 v 24 h 4 V 24 h -4 z"}}]}]},{U:"span",J:"ytp-upnext-bottom",D:[{U:"span",J:"ytp-upnext-cancel"},
{U:"span",J:"ytp-upnext-paused",G0:"Auto-play is paused"}]}]});this.api=m;this.cancelButton=null;this.M0=this.Vc("ytp-svg-autoplay-ring");this.W=this.notification=this.V=this.suggestion=null;this.T=new g.d1(this.j,5E3,this);this.L=0;var F=this.Vc("ytp-upnext-cancel");this.cancelButton=new g.H({U:"button",UR:["ytp-upnext-cancel-button","ytp-button"],C:{tabindex:"0","aria-label":"Cancel auto-play"},G0:"Cancel"});g.Z(this,this.cancelButton);this.cancelButton.listen("click",this.b9,this);this.cancelButton.ER(F);
this.cancelButton&&this.api.createClientVe(this.cancelButton.element,this,115129);g.Z(this,this.T);this.api.createClientVe(this.element,this,18788);F=this.Vc("ytp-upnext-autoplay-icon");this.A(F,"click",this.Hb);this.api.createClientVe(F,this,115130);this.hF();this.A(m,"autonavvisibility",this.hF);this.A(m,"mdxnowautoplaying",this.tF);this.A(m,"mdxautoplaycanceled",this.OR);g.E(this.element,"ytp-upnext-mobile",this.api.K().B)}j(){this.notification&&(this.T.stop(),this.xW(this.W),this.W=null,this.notification.close(),
this.notification=null)}Z(m){this.suggestion=m;g.Ar(this,m,"hqdefault.jpg")}hF(){this.CI(this.api.B2());this.api.logVisibility(this.element,this.api.B2());this.api.logVisibility(this.Vc("ytp-upnext-autoplay-icon"),this.api.B2());this.cancelButton&&this.api.logVisibility(this.cancelButton.element,this.api.B2())}xC(){window.focus();this.j()}O(m){this.X()||(g.yL("a11y-announce",`${"Up Next"} ${this.suggestion.title}`),this.L=(0,g.W)(),this.V=new g.d1(()=>{bj(this,m)},25),bj(this,m),WNC(this.api,Q2f(this,
m)));
g.ue(this.element,"ytp-upnext-autoplay-paused")}hide(){super.hide()}X(){return!!this.V}G(){this.B();this.L=(0,g.W)();bj(this);g.Fs(this.element,"ytp-upnext-autoplay-paused")}B(){this.X()&&(this.V.dispose(),this.V=null)}select(m=!1){if(this.api.K().N("autonav_notifications")&&m&&window.Notification&&typeof document.hasFocus==="function"){const F=Notification.permission;F==="default"?Notification.requestPermission():F!=="granted"||document.hasFocus()||(this.j(),this.notification=new Notification("Up Next",
{body:this.suggestion.title,icon:this.suggestion.Hh()}),this.W=this.A(this.notification,"click",this.xC),this.T.start())}this.B();this.api.nextVideo(!1,m)}Hb(m){!g.pk(this.cancelButton.element,m.target)&&g.KI(m,this.api)&&(this.api.B2()&&this.api.logClick(this.Vc("ytp-upnext-autoplay-icon")),this.select())}b9(){this.api.B2()&&this.cancelButton&&this.api.logClick(this.cancelButton.element);g.ra(this.api,!0)}tF(m){this.api.getPresentingPlayerType();this.show();this.O(m)}OR(){this.api.getPresentingPlayerType();
this.B();this.hide()}IW(){this.B();this.j();super.IW()}};var BjC=class extends Ch{constructor(m){super(m,"autonav-endscreen");this.overlay=this.videoData=null;this.table=new g.H({U:"div",J:"ytp-suggestion-panel",D:[{U:"div",UR:["ytp-autonav-endscreen-upnext-header","ytp-autonav-endscreen-more-videos"],G0:"More videos"}]});this.W=new g.H({U:"div",J:"ytp-suggestions-container"});this.videos=[];this.G=null;this.L=this.Z=!1;this.B=new JN(this.player);g.Z(this,this.B);this.B.ER(this.element);m.getVideoData().SY?this.X=this.B:(this.X=new mt(m),g.jB(this.player,
this.X.element,4),g.Z(this,this.X));this.overlay=new g.H({U:"div",J:"ytp-autonav-overlay-cancelled-state"});g.Z(this,this.overlay);this.overlay.ER(this.element);this.O=new g.uf(this);g.Z(this,this.O);g.Z(this,this.table);this.table.ER(this.element);this.table.show();g.Z(this,this.W);this.W.ER(this.table.element);this.hide()}create(){super.create();this.O.A(this.player,"appresize",this.j);this.O.A(this.player,"onVideoAreaChange",this.j);this.O.A(this.player,"videodatachange",this.onVideoDataChange);
this.O.A(this.player,"autonavchange",this.hF);this.O.A(this.player,"onAutonavCancelled",this.b9);this.onVideoDataChange()}show(){super.show();(this.Z||this.G&&this.G!==this.videoData.clientPlaybackNonce)&&g.ra(this.player,!1);g.Ip(this.player)&&this.V()&&!this.G?(c6(this),this.videoData.autonavState===2?this.player.getVisibilityState()===3||hN(this.player.R9())&&this.player.N("web_player_pip_logging_fix")?this.X.select(!0):this.X.O():this.videoData.autonavState===3&&this.X.G()):(g.ra(this.player,
!0),c6(this));this.j()}hide(){super.hide();this.X.G();c6(this)}j(){var m=this.player.BM(!0,this.player.isFullscreen());c6(this);sq(this.B);g.E(this.element,"ytp-autonav-cancelled-small-mode",this.JD(m));g.E(this.element,"ytp-autonav-cancelled-tiny-mode",this.X3(m));g.E(this.element,"ytp-autonav-cancelled-mini-mode",m.width<=400||m.height<=360);this.overlay&&g.nk(this.overlay.element,{width:`${m.width}px`});if(!this.L)for(m=0;m<this.videos.length;m++)g.E(this.videos[m].element,"ytp-suggestion-card-with-margin",
m%2===1)}onVideoDataChange(){var m=this.player.getVideoData();if(this.videoData!==m&&m){this.videoData=m;m=this.videoData.suggestions;var F=this.videoData.XN();F&&(this.X.Z(F),this.X!==this.B&&this.B.Z(F));if(m&&m.length)for(let u=0;u<njC.length;++u){var L=njC[u];m&&m[L]&&(this.videos[u]=new dLf(this.player),F=this.videos[u],L=m[L],F.suggestion!==L&&(F.suggestion=L,g.Ar(F,L)),g.Z(this,this.videos[u]),this.videos[u].ER(this.W.element))}this.j()}}hF(m){m===1?(this.Z=!1,this.G=this.videoData.clientPlaybackNonce,
this.X.B(),this.Gh&&this.j()):(this.Z=!0,this.B2()&&(m===2?this.X.O():m===3&&this.X.G()))}b9(m){m?this.hF(1):(this.G=null,this.Z=!1)}V(){return this.videoData.autonavState!==1}JD(m){return(m.width<910||m.height<459)&&!this.X3(m)&&!(m.width<=400||m.height<=360)}X3(m){return m.width<800&&!(m.width<=400||m.height<=360)}B2(){return this.Gh&&g.Ip(this.player)&&this.V()&&!this.G}},njC=[1,3,2,4];var HkG=class extends Ch{constructor(m){super(m,"videowall-endscreen");this.Y=m;this.stills=[];this.O=this.videoData=null;this.j=this.W=!1;this.hF=null;g.Fs(this.element,"modern-videowall-endscreen");this.B=new g.uf(this);g.Z(this,this.B);this.L=new g.d1(()=>{g.Fs(this.element,"ytp-show-tiles")},0);
g.Z(this,this.L);this.table=new g.gb({U:"div",J:"ytp-modern-endscreen-content"});g.Z(this,this.table);this.table.ER(this.element);m.getVideoData().SY?this.X=new JN(m,!0):this.X=new mt(m);g.Z(this,this.X);g.jB(this.player,this.X.element,4);m.createClientVe(this.element,this,158789);this.hide()}create(){super.create();var m=this.player.getVideoData();m&&(this.videoData=m);this.G();this.B.A(this.player,"appresize",this.G);this.B.A(this.player,"onVideoAreaChange",this.G);this.B.A(this.player,"videodatachange",
this.onVideoDataChange);this.B.A(this.player,"autonavchange",this.Z);this.B.A(this.player,"onAutonavCancelled",this.b9);m=this.videoData.autonavState;m!==this.hF&&this.Z(m);this.B.A(this.element,"transitionend",this.Hb)}destroy(){g.u$(this.B);g.uM(this.stills);this.stills=[];super.destroy();g.ue(this.element,"ytp-show-tiles");this.L.stop();this.hF=this.videoData.autonavState}V(){return this.videoData.autonavState!==1}show(){const m=this.Gh;super.show();g.ue(this.element,"ytp-show-tiles");this.player.K().B?
g.nd(this.L):this.L.start();(this.j||this.O&&this.O!==this.videoData.clientPlaybackNonce)&&g.ra(this.player,!1);d7(this)?(nh(this),this.videoData.autonavState===2?this.player.getVisibilityState()===3||hN(this.player.R9())&&this.player.N("web_player_pip_logging_fix")?this.X.select(!0):this.X.O():this.videoData.autonavState===3&&this.X.G()):(g.ra(this.player,!0),nh(this));m!==this.Gh&&this.player.logVisibility(this.element,!0)}hide(){const m=this.Gh;super.hide();this.X.G();nh(this);m!==this.Gh&&this.player.logVisibility(this.element,
!1)}Hb(m){m.target===this.element&&this.G()}G(){const m=this.videoData?.suggestions?.length?this.videoData?.suggestions:[this.videoData?.XN()];if(m.length){var F=this.Y.BM(!0,this.Y.isFullscreen()),L=Math.floor((F.width-64+16)/(g.hJ(F.width*.27,250,450)+16));F=Math.min(3,Math.floor((F.height-64)/((F.width-64-(L-1)*16)/L*.5625+70)));g.qf(this.element,["ytp-modern-endscreen-limit-rows-1","ytp-modern-endscreen-limit-rows-2","ytp-modern-endscreen-limit-rows-3"]);g.Fs(this.element,`ytp-modern-endscreen-limit-rows-${F}`);
g.E(this.element,"ytp-modern-endscreen-single-item",L===1);g.E(this.element,"ytp-modern-endscreen-row-0",F===0);L=this.table.element;L.ariaLive="polite";this.X.Z(this.videoData.XN());this.X instanceof JN&&sq(this.X);g.E(this.element,"ytp-endscreen-takeover",d7(this));nh(this);F=0;L.ariaBusy="true";var u=m.length;for(let q=0;q<u;q++){const A=q%u;let r=this.stills[q];r||(r=new g.w7_(this.player),this.stills[q]=r,L.appendChild(r.element));g.uSM(r,m[A]);F++}this.stills.length=F}}onVideoDataChange(){const m=
this.player.getVideoData({playerType:1});this.videoData!==m&&(m?.XN()?(this.videoData=m,this.G()):this.player.Bb("missg",{vid:m?.videoId||"",cpn:m?.clientPlaybackNonce||""}))}T(){return this.X.X()}Z(m){m===1?(this.j=!1,this.O=this.videoData.clientPlaybackNonce,this.X.B(),this.Gh&&this.G()):(this.j=!0,this.Gh&&d7(this)&&(m===2?this.X.O():m===3&&this.X.G()))}b9(m){if(m){for(m=0;m<this.stills.length;m++)this.Y.logVisibility(this.stills[m].element,!0);this.Z(1)}else this.O=null,this.j=!1;this.G()}B2(){return this.Gh&&
d7(this)}};var JQC=class extends Ch{constructor(m){super(m,"subscribecard-endscreen");this.X=new g.H({U:"div",J:"ytp-subscribe-card",D:[{U:"img",J:"ytp-author-image",C:{src:"{{profilePicture}}"}},{U:"div",J:"ytp-subscribe-card-right",D:[{U:"div",J:"ytp-author-name",G0:"{{author}}"},{U:"div",J:"html5-subscribe-button-container"}]}]});g.Z(this,this.X);this.X.ER(this.element);const F=m.getVideoData();this.subscribeButton=new g.HC("Subscribe",null,"Unsubscribe",null,!0,!1,F.r9,F.subscribed,"trailer-endscreen",null,
m,!1);g.Z(this,this.subscribeButton);this.subscribeButton.ER(this.X.Vc("html5-subscribe-button-container"));this.A(m,"videodatachange",this.AF);this.AF();this.hide()}AF(){const m=this.player.getVideoData();this.X.update({profilePicture:m.profilePicture,author:m.author});this.subscribeButton.channelId=m.r9;var F=this.subscribeButton;m.subscribed?F.X():F.B()}};var CI2=class extends g.H{constructor(m){const F=m.K(),L=g.Qh||g.qm?{style:"will-change: opacity"}:void 0,u=F.V,q=["ytp-videowall-still"];F.B&&q.push("ytp-videowall-show-text");super({U:"a",UR:q,C:{href:"{{url}}",target:u?F.W:"","aria-label":"{{aria_label}}","data-is-live":"{{is_live}}","data-is-list":"{{is_list}}","data-is-mix":"{{is_mix}}"},D:[{U:"div",J:"ytp-videowall-still-image",C:{style:"{{background}}"}},{U:"span",J:"ytp-videowall-still-info",C:{"aria-hidden":"true"},D:[{U:"span",J:"ytp-videowall-still-info-bg",
D:[{U:"span",J:"ytp-videowall-still-info-content",C:L,D:[{U:"span",J:"ytp-videowall-still-info-title",G0:"{{title}}"},{U:"span",J:"ytp-videowall-still-info-author",G0:"{{author_and_views}}"},{U:"span",J:"ytp-videowall-still-info-live",G0:"Live"},{U:"span",J:"ytp-videowall-still-info-duration",G0:"{{duration}}"}]}]}]},{U:"span",UR:["ytp-videowall-still-listlabel-regular","ytp-videowall-still-listlabel"],C:{"aria-hidden":"true"},D:[{U:"span",J:"ytp-videowall-still-listlabel-icon"},"Playlist",{U:"span",
J:"ytp-videowall-still-listlabel-length",D:[" (",{U:"span",G0:"{{playlist_length}}"},")"]}]},{U:"span",UR:["ytp-videowall-still-listlabel-mix","ytp-videowall-still-listlabel"],C:{"aria-hidden":"true"},D:[{U:"span",J:"ytp-videowall-still-listlabel-mix-icon"},"Mix",{U:"span",J:"ytp-videowall-still-listlabel-length",G0:" (50+)"}]}]});this.suggestion=null;this.B=u;this.api=m;this.X=new g.uf(this);g.Z(this,this.X);this.listen("click",this.onClick);this.listen("keypress",this.onKeyPress);this.X.A(m,"videodatachange",
this.onVideoDataChange);m.createServerVe(this.element,this);this.onVideoDataChange()}select(){this.api.JO(this.suggestion.videoId,this.suggestion.sessionData,this.suggestion.playlistId,void 0,void 0,this.suggestion.Fq||void 0)&&this.api.logClick(this.element)}onClick(m){if(g.kp(this.api.K())&&this.api.N("web_player_log_click_before_generating_ve_conversion_params")){this.api.logClick(this.element);let F=this.suggestion.Y1();const L={};g.l2(this.api,L);F=g.ir(F,L);g.fI(F,this.api,m)}else g.KI(m,this.api,
this.B,this.suggestion.sessionData||void 0)&&this.select()}onKeyPress(m){switch(m.keyCode){case 13:case 32:m.defaultPrevented||(this.select(),m.preventDefault())}}onVideoDataChange(){const m=this.api.getVideoData(),F=this.api.K();this.B=m.dJ?!1:F.V}};var mr8=class extends Ch{constructor(m){super(m,"videowall-endscreen");this.Y=m;this.O=0;this.stills=[];this.j=this.videoData=null;this.L=this.hF=!1;this.b9=null;this.G=new g.uf(this);g.Z(this,this.G);this.Z=new g.d1(()=>{g.Fs(this.element,"ytp-show-tiles")},0);
g.Z(this,this.Z);var F=new g.H({U:"button",UR:["ytp-button","ytp-endscreen-previous"],C:{"aria-label":"Previous"},D:[g.lx()]});g.Z(this,F);F.ER(this.element);F.listen("click",this.tF,this);this.table=new g.gb({U:"div",J:"ytp-endscreen-content"});g.Z(this,this.table);this.table.ER(this.element);F=new g.H({U:"button",UR:["ytp-button","ytp-endscreen-next"],C:{"aria-label":"Next"},D:[g.ws()]});g.Z(this,F);F.ER(this.element);F.listen("click",this.M0,this);m.getVideoData().SY?this.X=new JN(m,!0):this.X=
new mt(m);g.Z(this,this.X);g.jB(this.player,this.X.element,4);m.createClientVe(this.element,this,158789);this.hide()}create(){super.create();var m=this.player.getVideoData();m&&(this.videoData=m);this.B();this.G.A(this.player,"appresize",this.B);this.G.A(this.player,"onVideoAreaChange",this.B);this.G.A(this.player,"videodatachange",this.onVideoDataChange);this.G.A(this.player,"autonavchange",this.W);this.G.A(this.player,"onAutonavCancelled",this.Hb);m=this.videoData.autonavState;m!==this.b9&&this.W(m);
this.G.A(this.element,"transitionend",this.OR)}destroy(){g.u$(this.G);g.uM(this.stills);this.stills=[];super.destroy();g.ue(this.element,"ytp-show-tiles");this.Z.stop();this.b9=this.videoData.autonavState}V(){return this.videoData.autonavState!==1}show(){const m=this.Gh;super.show();g.ue(this.element,"ytp-show-tiles");this.player.K().B?g.nd(this.Z):this.Z.start();(this.L||this.j&&this.j!==this.videoData.clientPlaybackNonce)&&g.ra(this.player,!1);B6(this)?(H6(this),this.videoData.autonavState===2?
this.player.getVisibilityState()===3||hN(this.player.R9())&&this.player.N("web_player_pip_logging_fix")?this.X.select(!0):this.X.O():this.videoData.autonavState===3&&this.X.G()):(g.ra(this.player,!0),H6(this));m!==this.Gh&&this.player.logVisibility(this.element,!0)}hide(){const m=this.Gh;super.hide();this.X.G();H6(this);m!==this.Gh&&this.player.logVisibility(this.element,!1)}OR(m){m.target===this.element&&this.B()}B(){var m=this.videoData?.suggestions?.length?this.videoData?.suggestions:[this.videoData?.XN()];
if(m.length){g.Fs(this.element,"ytp-endscreen-paginate");var F=this.Y.BM(!0,this.Y.isFullscreen()),L=g.Cw(this.Y);L&&(L=L.hK()?48:32,F.width-=L*2);var u=F.width/F.height,q=96/54,A=L=2,r=Math.max(F.width/96,2),y=Math.max(F.height/54,2),G=m.length;var v=G*4;for(v-=4;v>0&&(L<r||A<y);){var l=L/2,w=A/2,V=L<=r-2&&v>=w*4,I=A<=y-2&&v>=l*4;if((l+1)/w*q/u>u/(l/(w+1)*q)&&I)v-=l*4,A+=2;else if(V)v-=w*4,L+=2;else if(I)v-=l*4,A+=2;else break}q=!1;v>=12&&G*4-v<=6&&(A>=4||L>=4)&&(q=!0);v=L*96;r=A*54;u=v/r<u?F.height/
r:F.width/v;u=Math.min(u,2);v=Math.floor(Math.min(F.width,v*u));r=Math.floor(Math.min(F.height,r*u));F=this.table.element;F.ariaLive="polite";g.lC(F,v,r);g.nk(F,{marginLeft:`${v/-2}px`,marginTop:`${r/-2}px`});this.X.Z(this.videoData.XN());this.X instanceof JN&&sq(this.X);g.E(this.element,"ytp-endscreen-takeover",B6(this));H6(this);v+=4;r+=4;u=0;F.ariaBusy="true";for(y=0;y<L;y++)for(l=0;l<A;l++)if(V=u,I=0,q&&y>=L-2&&l>=A-2?I=1:l%2===0&&y%2===0&&(l<2&&y<2?l===0&&y===0&&(I=2):I=2),V=g.Ob(V+this.O,G),
I!==0){w=this.stills[u];w||(w=new CI2(this.player),this.stills[u]=w,F.appendChild(w.element));var P=Math.floor(r*l/A);const N=Math.floor(v*y/L),x=Math.floor(r*(l+I)/A)-P-4,X=Math.floor(v*(y+I)/L)-N-4;g.Lm(w.element,N,P);g.lC(w.element,X,x);g.nk(w.element,"transitionDelay",(l+y)/20+"s");g.E(w.element,"ytp-videowall-still-mini",I===1);g.E(w.element,"ytp-videowall-still-large",I>2);I=Math.max(X,x);g.E(w.element,"ytp-videowall-still-round-large",I>=256);g.E(w.element,"ytp-videowall-still-round-medium",
I>96&&I<256);g.E(w.element,"ytp-videowall-still-round-small",I<=96);V=m[V];w.suggestion!==V&&(w.suggestion=V,I=w.api.K(),P=g.mI(w.element,"ytp-videowall-still-large")?"hqdefault.jpg":"mqdefault.jpg",g.Ar(w,V,P),g.kp(I)&&!w.api.N("web_player_log_click_before_generating_ve_conversion_params")&&(I=V.Y1(),P={},g.dH(w.api,"addEmbedsConversionTrackingParams",[P]),I=g.ir(I,P),w.updateValue("url",I)),(V=(V=V.sessionData)&&V.itct)&&w.api.setTrackingParams(w.element,V));u++}F.ariaBusy="false";g.E(this.element,
"ytp-endscreen-paginate",u<G);for(m=this.stills.length-1;m>=u;m--)L=this.stills[m],g.NL(L.element),g.Lx(L);this.stills.length=u}}onVideoDataChange(){const m=this.player.getVideoData({playerType:1});this.videoData!==m&&(m?.XN()?(this.O=0,this.videoData=m,this.B()):this.player.Bb("missg",{vid:m?.videoId||"",cpn:m?.clientPlaybackNonce||""}))}M0(){this.O+=this.stills.length;this.B()}tF(){this.O-=this.stills.length;this.B()}T(){return this.X.X()}W(m){m===1?(this.L=!1,this.j=this.videoData.clientPlaybackNonce,
this.X.B(),this.Gh&&this.B()):(this.L=!0,this.Gh&&B6(this)&&(m===2?this.X.O():m===3&&this.X.G()))}Hb(m){if(m){for(m=0;m<this.stills.length;m++)this.Y.logVisibility(this.stills[m].element,!0);this.W(1)}else this.j=null,this.L=!1;this.B()}B2(){return this.Gh&&B6(this)}};var FLC=class extends g.H{constructor(m){super({U:"button",UR:["ytp-watch-on-youtube-button","ytp-button"],G0:"{{content}}"});this.Y=m;this.buttonType=this.buttonType=1;this.X();this.buttonType===2&&g.Fs(this.element,"ytp-continue-watching-button");this.listen("click",this.onClick);this.listen("videodatachange",this.X);this.CI(!0)}X(){let m,F;switch(this.buttonType){case 1:m="Watch again on YouTube";F=156915;break;case 2:m="Continue watching on YouTube";F=156942;break;default:m="Continue watching on YouTube",
F=156942}this.update({content:m});this.Y.hasVe(this.element)&&this.Y.destroyVe(this.element);this.Y.createClientVe(this.element,this,F)}onClick(m){this.Y.N("web_player_log_click_before_generating_ve_conversion_params")&&this.Y.logClick(this.element);g.fI(this.getVideoUrl(),this.Y,m);this.Y.N("web_player_log_click_before_generating_ve_conversion_params")||this.Y.logClick(this.element)}getVideoUrl(){var m=!0;switch(this.buttonType){case 1:m=!0;break;case 2:m=!1}m=this.Y.getVideoUrl(m,!1,!1,!0);const F=
this.Y.K();if(g.kp(F)){const L={};g.kp(F)&&g.dH(this.Y,"addEmbedsConversionTrackingParams",[L]);m=g.ir(m,L)}return m}logVisibility(){this.Y.logVisibility(this.element,this.Gh&&this.XN)}show(){super.show();this.logVisibility()}hide(){super.hide();this.logVisibility()}S0(m){super.S0(m);this.logVisibility()}};var LLe=class extends Ch{constructor(m){super(m,"watch-again-on-youtube-endscreen");this.watchButton=new FLC(m);g.Z(this,this.watchButton);this.watchButton.ER(this.element);g.mF_(m)&&(this.X=new g.nAq(m),g.Z(this,this.X),this.B=new g.H({U:"div",UR:["ytp-watch-again-on-youtube-endscreen-more-videos-container"],C:{tabIndex:"-1"},D:[this.X]}),g.Z(this,this.B),this.X.ER(this.B.element),this.B.ER(this.element));m.createClientVe(this.element,this,156914);this.hide()}hasSuggestions(){return this.X?.hasSuggestions()}show(){if(this.player.getPlayerState()!==
3){super.show();const F=this.B;if(F){var m=this.X.hasSuggestions();g.E(this.element,"ytp-shorts-branded-ui",m);m?F.show():F.hide()}g.Cw(this.player)?.xl(!0);this.player.logVisibility(this.element,!0);this.watchButton.S0(!0)}}hide(){super.hide();g.Cw(this.player)?.xl(!1);this.player.logVisibility(this.element,!1);this.watchButton.S0(!1)}};g.PC("endscreen",class extends g.gB{constructor(m){super(m);this.endScreen=null;this.X=this.B=this.G=!1;this.listeners=new g.uf(this);g.Z(this,this.listeners);const F=m.K();m.isEmbedsShortsMode()?this.endScreen=new LLe(m):s2R(m)?(this.G=!0,bkf(this),this.X?this.endScreen=new BjC(m):F.N("delhi_modern_endscreen")?this.endScreen=new HkG(m):this.endScreen=new mr8(m)):F.v2?this.endScreen=new JQC(m):this.endScreen=new Ch(m);g.Z(this,this.endScreen);g.jB(m,this.endScreen.element,4);cQZ(this);this.listeners.A(m,
"videodatachange",this.onVideoDataChange,this);this.listeners.A(m,g.uz("endscreen"),L=>{this.onCueRangeEnter(L)});
this.listeners.A(m,g.qq("endscreen"),L=>{this.onCueRangeExit(L)})}ou(){var m=this.player.getVideoData();
const F=m.mutedAutoplay&&(m.limitedPlaybackDurationInSeconds>0||m.endSeconds>0||m.mutedAutoplayDurationMode!==2);if(this.player.isEmbedsShortsMode()&&!F)return!0;var L=!(!m?.XN()&&!m?.suggestions?.length);L=!s2R(this.player)||L;m=m.Ld;const u=this.player.e8();return L&&!m&&!u&&!F}B2(){return this.endScreen.B2()}OT(){return this.B2()?this.endScreen.T():!1}IW(){this.player.Ow("endscreen");super.IW()}load(){{const L=this.player.getVideoData(),u=L.transitionEndpointAtEndOfStream;if(u&&u.videoId){var m=
this.player.ll().bD.get("heartbeat");var F=L.XN();!F||u.videoId!==F.videoId||L.jO?(this.player.JO(u.videoId,void 0,void 0,!0,!0,u),m&&m.OY("HEARTBEAT_ACTION_TRIGGER_AT_STREAM_END","HEARTBEAT_ACTION_TRANSITION_REASON_HAS_NEW_STREAM_TRANSITION_ENDPOINT"),m=!0):m=!1}else m=!1}m||(super.load(),this.endScreen.show())}unload(){super.unload();this.endScreen.hide();this.endScreen.destroy()}onCueRangeEnter(m){this.ou()&&(this.endScreen.created||this.endScreen.create(),m.getId()==="load"&&this.load())}onCueRangeExit(m){m.getId()===
"load"&&this.loaded&&this.unload()}onVideoDataChange(){cQZ(this);this.G&&bkf(this)&&(this.endScreen&&(this.endScreen.hide(),this.endScreen.created&&this.endScreen.destroy(),this.endScreen.dispose()),this.X?this.endScreen=new BjC(this.player):this.endScreen=new mr8(this.player),g.Z(this,this.endScreen),g.jB(this.player,this.endScreen.element,4))}});})(_yt_player);
